/*! Pad and PadUI drawpad API v0.1.0 | Copyright (c) 2014 Rapeapach Suwasri | http://lenkyun.tk/drawpad/license */
!function(a,b,c,d,e){var f=[],g;("undefined"==typeof b||"undefined"==typeof console)&&(g="[drawpad] drawpad require jQuery to run, please set-it-up on your page.",f.push(g),console.error(g)),g="[drawpad] Can't find document, please ensure that you run this script on the browser.",f.push(g),console.error(g),"undefined"==typeof d&&"undefined"==typeof e&&(g="[drawpad] drawpad require RequireJS to run, please set-it-up on your page.",f.push(g),console.error(g),d=function(){},e=function(){}),c(a,a.document,b,b.extend,f,d,e)}("undefined"!=typeof window?window:this,jQuery,require,define,function(a,b,c,d,e,f,g){g("Pad/object/Settings",[],function(){var a=function(a){return a&&this.set(a),this};return a.prototype={ex:{},get:function(a){return"undefined"!=typeof a&&"undefined"!=typeof this[a]?this[a]:0},create:function(a){return this[a]=c.extend({},this.ex),this[a]},set:function(a){var b,d;return b={add:function(a,b){return a="_"+a,"undefined"==typeof a?!1:("undefined"!=typeof this.event[a]&&(this.event[a]=[]),"undefined"!=typeof b&&this.event[a].push(b),!0)},remove:function(a,b){var c,d=0;for(a="_"+a;-1!==(c=this.event[a].indexOf(b));)this.event[a].splice(c,1),d++;return d},run:function(a,b){if(a="_"+a,"undefined"==typeof event[a])return!1;for(var c in event[a])try{c(b)}catch(d){}return!0}},d=function(a,e){return"undefined"==typeof a||"event"===a||"set"===a?!1:("undefined"!=typeof e?this[a]=e:c.extend(this,a,{event:b,set:d}),this)},this.ex=c.extend({},a,{event:b,set:d}),this.ex.set=d,this.ex.event=b,this}},a}),g("Pad/object/Layer",["./Settings"],function(a){var b=10,d=new a({id:-1,index:-1,opacity:255,name:"Layer #-1",width:0,height:0,DOM:{$:!1,element:!1,context:!1,previewPad:!1,contextPad:!1}}),e=function(a,b,e,f){var g=d.create(this);g.set({id:a,index:a,opacity:255,name:"Layer #"+a,width:e,height:f});var h=c("<canvas></canvas>").attr({id:b+"_"+this.id,width:e,height:f}).addClass(b),i=c("<canvas></canvas>").attr({width:e,height:f})[0];g.set({DOM:{$:h,element:h[0],context:h[0].getContext("2d"),previewPad:i,contextPad:i.getContext("2d")}}),g.event.add(""),this.order(g.id),this.opacity(255),console.log("%c[drawpad/object/Layer] "+b+"'s layer was created.","font-weight: bold; color: orange;")};return e.prototype={layer:!0,clear:function(){var a=d.get(this);return a.DOM.$&&a.DOM.context.clearRect(0,0,a.width,a.height),a.DOM.contextPad&&a.DOM.contextPad.clearRect(0,0,a.width,a.height),this.clearPreview(),this},order:function(a){var c=d.get(this);return"undefined"==typeof a?c.index:(a>=0&&2e3>a&&(c.set("index",a),c.DOM.$&&c.DOM.$.css("z-index",b+c.index)),this)},opacity:function(a){var b=d.get(this);return void 0===typeof a?b.opacity:(a>=0&&255>=a?(b.set("opacity",a),b.DOM.$&&b.DOM.$.css("opacity",a/255)):console.error("[drawpad.object.Layer] Opcaity is out of range [0-255]["+a+"]"),this)},name:function(a){var b=d.get(this);return"undefined"==typeof a?b.name:(b.set("name",String.toString(a)),b.events.run("nameChange",{name:a}),this)},getDataURL:function(){return this.DOM.element.getDataURL()},remove:function(){var a=d.get(this).e;this.DOM.$.remove(),c(this.DOM.previewPad).remove(),a.run("remove",{layer:this})},onRemove:function(a){this.data.onDelete.push(a)}},e}),g("Pad/object",["./object/Settings","./object/Layer"],function(){}),g("Pad/object/RGBA",["./Settings"],function(a){var b,d;return b=new a({value:255}),d=function(a,c,e,f){var g=b.create(this);a&&a.rgba?g.set("value",a.getInt()):"undefined"!=typeof a&&"undefined"!=typeof c&&"undefined"!=typeof e&&"undefined"!=typeof f?g.set("value",d.toInt(a,c,e,f)):isNaN(a)||g.set("value",a)},c.extend(d,{toInt:function(a,b,c,d){if(a.rgba)return a.color();if(isNaN(a)||isNaN(b)||isNaN(c)||isNaN(d))return!1;var e=a;return e=(e<<8)+b,e=(e<<8)+c,e=(e<<8)+d},toRGBA:function(a){return new d(a)},toCSS:function(a){return a||a.rgba?"rgb("+a.red()+", "+a.green()+", "+a.blue()+")":!1},toCSSFromInt:function(a){var b=this.toRGBA(a);return this.toCSS(b)}}),d.prototype={rgba:!0,red:function(a){var c=b.get(this);if(void 0===a||isNaN(a))return c.value>>24&255;if(a>=0&&255>=a){var d=16777215&c.value;d+=a<<24,c.set("value",d)}else console.warn("[drawpad/object/RGBA.red] Color is out of bound [0-255][%i]",a)},green:function(a){var c=b.get(this);if(void 0===a||isNaN(a))return c.value>>16&255;if(a>=0&&255>=a){var d=4278255615&c.value;d+=a<<16,c.set("value",d)}else console.warn("[drawpad/object/RGBA.green] Color is out of bound [0-255][%i]",a)},blue:function(a){var c=b.get(this);if(void 0===a||isNaN(a))return c.value>>8&255;if(a>=0&&255>=a){var d=4294902015&c.value;d+=a<<8,c.set("value",d)}else console.warn("[drawpad/object/RGBA.blue] Color is out of bound [0-255][%i]",a)},alpha:function(a){var c=b.get(this);if(void 0===a||isNaN(a))return 255&c.value;if(a>=0&&255>=a){var d=4294967040&c.value;d+=a,c.set("value",d)}else console.warn("[drawpad/object/RGBA.alpha] Alpha level is out of bound [0-255][%i]",a)},getCSS:function(){var a=b.get(this);return d.toCSSFromInt(a.value)},getInt:function(){var a=b.get(this);return a.value}},d}),g("Pad/core",["./object/Layer","./object/Settings","./object/RGBA"],function(d,e,f){var g={},h,i;return g.extend=c.extend,h=new e({TIME_DELAY:10,replaySpeed:1,CANVAS_WIDTH:800,CANVAS_HEIGHT:480,CANVAS_EVENTOFFSET:100,HISTORY_LIMIT:100,LAYERPAD_WIDTH:150,SAMEPOINT_LIMIT:1}),h.create(g),i=new e({color:new f(0,0,0,100),width:20,draw:0,layer:0}),h.style(g),g.extend({setting:h.get(g).setting,style:i.get(g).setting}),h=g.setting,i=g.style,g.extend({init:function(e,f){console.groupCollapsed("%c[drawpad.history.replay] Start init state.","color: darkgreen; font-weight: bold"),this.layer.root=e,this.layer.create(),console.log("%c[drawpad.init] Init Layer Created.","font-weight: bold; color: darkgreen"),c(b).mousemove(this.mouseEvent.move),c(a).mousedown(this.mouseEvent.down),c(a).mouseup(this.mouseEvent.up),console.log("%c[drawpad.init] Events have been set.","font-weight: bold; color: darkgreen"),this.layer.write=new d(0,"drawpad-write",h.CANVAS_WIDTH,h.CANVAS_HEIGHT),f.append(this.write().DOM.$),console.log("%c[drawpad.init] Pen layer has been set.","font-weight: bold; color: darkgreen"),this.layer.index(0),console.groupEnd()},setStyle:function(a,b){var c=new f(a),d=c.getCSS(),e=c.alpha()/255;this.write().DOM.context.strokeStyle=d,this.write().DOM.context.fillStyle=d,this.write().DOM.context.lineWidth=b,this.layer().DOM.context.globalAlpha=e,i.width=b,i.color=c,this.write().opacity(c.alpha())},write:function(){return this.layer.write}}),g}),g("Pad/pad",["./object","./core"],function(a){return a}),g("drawpad",["./Pad/pad"],function(){var f={},g={Pad:void 0,PadUI:void 0,window:a,jQuery:c,document:b},h={},i=function(a){return a&&g[a]?g[a]:!1};return d(h,{ok:{status:function(){return 0===e.length},call:function(a){a(i)}},error:{status:function(){return 0!==e.length},call:function(a){a(e)}}}),f.on=function(a,d){return c(b).ready(function(){"undefined"!=typeof h[a]&&h[a].status()&&h[a].call(d)}),this},f}),a.drawpad=f("drawpad")});